<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Events</title>
    <link rel="stylesheet" href="stylesheets/events_css.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.20.2/TweenMax.min.js"></script>
    <script src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/16327/MorphSVGPlugin.min.js"></script>
    <script src="events.js"></script>
</head>
<div class="main">
  <button class="checkpoint01 checkpoint" id="1">Coming Soon</button>
  <button class="checkpoint02 checkpoint" id="2">Coming Soon</button>
  <button class="checkpoint03 checkpoint" id="3">Coming Soon</button>
  <button class="checkpoint04 checkpoint" id="4">Coming Soon</button>
</div>

  <div class="blobsWrapper">
    <div class="section"></div>
    <div class="section"></div>
    <div class="section"></div>
    <div class="section"><p>Recreation</p></div>
    <div class="section section04"><p>Competitive</p></div>
    <div class="section section03"><p>Workshops</p></div>
    <div class="section section02"><p>Talks</p></div>
    <div class="section section01"><p>Scroll Down</p></div>
  </div>


<div class="half"></div>
<script>
    console.clear();

TweenMax.set("h1, .checkpoint",{yPercent:-50, autoAlpha:1});
TweenMax.set(".end h1",{xPercent:-50, autoAlpha:1});
TweenMax.set(".end",{xPercent:-50, y:-120});
TweenLite.defaultEase = Sine.easeInOut;

var half = window.innerHeight/2;

  //Checkpoints:  adjust each as you want
  TweenMax.set(".checkpoint01", {y:800});
  TweenMax.set(".checkpoint02", {y:1200});
  TweenMax.set(".checkpoint03", {y:1500});
  TweenMax.set(".checkpoint04", {y:2000});

var sections = $('.section');


  TweenMax.staggerTo(sections,0,{
    cycle:{
      width:function(index){
         return (index+1) * 10+30 +"vw";
      },
      height:function(index){
        return (index+1) * 10+30 +"vw";
      },
      borderRadius:function(index){
        return (index+1) * 10+30 +"vw";
      },
      background:['black', '#424242','#282828']
    }
  },-0.1)


var active01 = false;
var blobAnimation01 = new TimelineMax({paused:true, onStart:stop01})
.to(".section01", 0.5, {scale:0, transformOrigin:"center"})
.to(".section01",0, {autoAlpha:0})
.staggerTo(".section",0.2,{scale:0.9,transformOrigin:"center"},-0.1)

var active02 = false;
var blobAnimation02 = new TimelineMax({paused:true, onStart:stop02})
.to(".section02", 0.3, {scale:0, transformOrigin:"center"})
.to(".section02",0, {autoAlpha:0})
.staggerTo(".section",0.3,{scale:0.8,transformOrigin:"center"},-0.1)

var active03 = false;
var blobAnimation03 = new TimelineMax({paused:true, onStart:stop03})
.to(".section03", 0.3, {scale:0, transformOrigin:"center"})
.to(".section03",0, {autoAlpha:0})
.staggerTo(".section",0.3,{scale:0.7,transformOrigin:"center"},-0.1)

var active04 = false;
var blobAnimation04 = new TimelineMax({paused:true, onStart:stop04})
.to(".section04", 0.3, {scale:0, transformOrigin:"center"})
.to(".section04",0, {autoAlpha:0})
.staggerTo(".section",0.3,{scale:0.6,transformOrigin:"center"},-0.1)

function stop01 (){
  active01 = true;
}
function stop02 (){
  active02 = true;
}
function stop03 (){
  active03 = true;
}
function stop04 (){
  active04 = true;
}

  onResize = function() {

    $( window ).scroll(function() {

      var object01 = $('.checkpoint01').offset().top - $(window).scrollTop() -half+10;
      var object02 = $('.checkpoint02').offset().top - $(window).scrollTop() -half+10;
      var object03 = $('.checkpoint03').offset().top - $(window).scrollTop() -half+10;
      var object04 = $('.checkpoint04').offset().top - $(window).scrollTop() -half+10;


      if(!active01 && object01 <= 0 ) {
        blobAnimation01.restart();
        TweenLite.set('.checkpoint01',{background:"#282828"});
      }
      else if(object01 > 0 ) {
        blobAnimation01.reverse();
        TweenLite.set('.checkpoint01',{display:"hidden"});
        active01 = false;
      }

      if(!active02 && object02 <= 0 ) {
        blobAnimation02.restart();
        TweenLite.set('.checkpoint02',{background:"#282828"});
      }
      else if(object02 > 0 ) {
        blobAnimation02.reverse();
        TweenLite.set('.checkpoint02',{display:"hidden"});
        active02 = false;
      }

      if(!active03 && object03 <= 0 ) {
        blobAnimation03.restart();
        TweenLite.set('.checkpoint03',{background:"#282828"});
      }
      else if(object03 > 0 ) {
        blobAnimation03.reverse();
        TweenLite.set('.checkpoint03',{display:"hidden"});
        active03 = false;
      }

      if(!active04 && object04 <= 0 ) {
        blobAnimation04.restart();
        TweenLite.set('.checkpoint04',{background:"#282828"});
      }
      else if(object04 > 0 ) {
        blobAnimation04.reverse();
        TweenLite.set('.checkpoint04',{display:"hidden"});
        active04 = false;
      }

    console.log(object01);
    });
  }

  $(document).ready(onResize);
  $(window).resize(onResize);

</script>
</html>